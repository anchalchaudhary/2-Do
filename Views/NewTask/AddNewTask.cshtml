@model ToDoList.Models.Task
@{
    ViewBag.Title = "AddNewTask";
}

<div><a href="/MyTasks/ViewTask">View your tasks</a></div>

<h2>Add New Task</h2>


@if (Session["UserID"] != null)
{
    <form id="AddNewTaskForm">
        <div class="form-group">
            @Html.LabelFor(model => model.Title, "Title")
            @Html.TextBoxFor(model => model.Title, new { @class = "form-control" })
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.TaskDetail, "Task")
            @Html.TextAreaFor(model => model.TaskDetail, new { @class = "form-control" })
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.StartDate, "Start Date")
            @Html.TextBoxFor(model => model.StartDate, new { @class = "form-control datepicker", @type = "date" })
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.StartTime, "Start Time")
            @Html.TextBoxFor(model => model.StartTime, new { @id = "timepicker", @class = "form-control", @type = "time" })
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.EndDate, "End Date")
            @Html.TextBoxFor(model => model.EndDate, new { @class = "form-control datepicker", @type = "date" })
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.EndTime, "End Time")
            @Html.TextBoxFor(model => model.EndTime, new { @id = "timepicker", @class = "form-control", @type = "time" })
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Priority, "Priority")
            @Html.DropDownListFor(model => model.PriorityID, ViewBag.PriorityList as SelectList, "--Select--", new { @class = "form-control" })
        </div>
        <div class="form-group">
            <input type="submit" class="btn btn-primary" onclick="NewTask()" value="SAVE" />
        </div>
    </form>
    <script>
        var NewTask = function () {
            var data = $("#AddNewTaskForm").serialize();
            $.ajax({
                type: "POST",
                url: "/NewTask/AddNewTask",
                data: data,
                success: function(response)
                {
                    alert("Task Added");

                    debugger
                    window.location.reload();
                }
            })
        }
    </script>
}